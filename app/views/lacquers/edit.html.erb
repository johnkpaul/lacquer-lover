<h1>Edit <%= @lacquer.name %></h1>

<%= form_for @lacquer do |f| %>
	<% if current_user.id == @lacquer.user_added_by_id %>
		<%= f.label :name %><br>
		<%= f.text_field :name %><br>
	<% end %>

	<%= f.fields_for @user_lacquer do |user_lacquer_form| %>
		<%= user_lacquer_form.collection_check_boxes :color_ids, Color.all, :id, :name %><br>
		<%= user_lacquer_form.label :finishes %><br>
		<%= user_lacquer_form.collection_check_boxes :finish_ids, Finish.all, :id, :description %><br>
	<% end %>

	<h3>Upload a Swatch for <%= @lacquer.name %></h3>
	<%= f.fields_for :swatches, @lacquer.swatches.new, :html => { :multipart => true } do |swatch_form| %>
    <p>
    <%= swatch_form.hidden_field :user_id, value: current_user.id %>
    <%= swatch_form.file_field :image %>
    </p>
  <% end %>
  <%= f.submit %>
<% end %>



<% if @lacquer.swatches.count > 0 %>
<h3>Swatches for <%= @lacquer.name %></h3>
	<div class="row">
	<% @lacquer.swatches.each do |swatch| %>
		<% if swatch.image.file? %>
			<div class="col-3">
			<%= image_tag swatch.image.url(:medium)%><br>
			added by <%= link_to swatch.user.name, user_path(swatch.user) %> on <%= swatch.created_at.strftime("%m/%d/%Y at %I:%M%p")  %><br>
			<% if swatch.user == current_user %>
				<%= link_to 'delete this swatch', swatch_path(swatch), method: 'DELETE' %>
			<% end %>
			</div>
		<% end %>
	<% end %>
	</div>
<% end %>
